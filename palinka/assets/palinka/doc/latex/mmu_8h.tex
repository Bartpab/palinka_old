\hypertarget{mmu_8h}{}\doxysection{C\+:/\+Users/gaelp/\+One\+Drive/\+Documents/\+Boulot/palinka/palinka/assets/palinka/src/model/common/mmu.h File Reference}
\label{mmu_8h}\index{C:/Users/gaelp/OneDrive/Documents/Boulot/palinka/palinka/assets/palinka/src/model/common/mmu.h@{C:/Users/gaelp/OneDrive/Documents/Boulot/palinka/palinka/assets/palinka/src/model/common/mmu.h}}


Contains the Memory Management Unit functions.  


{\ttfamily \#include $<$stddef.\+h$>$}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_memory_management_unit__t}{Memory\+Management\+Unit\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Memory Management Unit. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_heap_header__t}{Heap\+Header\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{mmu_8h_aced3be7468ff7fdb0280f39fc279c84b}{mmu\+\_\+init}} (struct \mbox{\hyperlink{struct_memory_management_unit__t}{Memory\+Management\+Unit\+\_\+t}} $\ast$mmu, char $\ast$base\+\_\+heap, size\+\_\+t heap\+\_\+max\+\_\+size)
\begin{DoxyCompactList}\small\item\em Initialise the MMU. \end{DoxyCompactList}\item 
char $\ast$ \mbox{\hyperlink{mmu_8h_a3e2de839c88fb1105d9eb63187c375f5}{sys\+\_\+alloc}} (struct \mbox{\hyperlink{struct_system__t}{System\+\_\+t}} $\ast$sys, size\+\_\+t len)
\begin{DoxyCompactList}\small\item\em System\textquotesingle{}s memory allocator. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{mmu_8h_a742589a238a1da57b56dbe8069e19823}{sys\+\_\+free}} (struct \mbox{\hyperlink{struct_system__t}{System\+\_\+t}} $\ast$sys, char $\ast$block)
\begin{DoxyCompactList}\small\item\em System\textquotesingle{}s memory free. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_heap_header__t}{Heap\+Header\+\_\+t}} $\ast$ \mbox{\hyperlink{mmu_8h_a29832d31589df1af6f94c0ce29b2d615}{get\+\_\+free\+\_\+block}} (struct \mbox{\hyperlink{struct_system__t}{System\+\_\+t}} $\ast$sys, size\+\_\+t size)
\item 
char $\ast$ \mbox{\hyperlink{mmu_8h_aa2721811f83422cae2d58ec18cdc060c}{sys\+\_\+sbrk}} (struct \mbox{\hyperlink{struct_system__t}{System\+\_\+t}} $\ast$sys, int len)
\begin{DoxyCompactList}\small\item\em Change the data segment size. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Contains the Memory Management Unit functions. 

\begin{DoxyAuthor}{Author}
GaÃ«l P. 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
06/08/2021 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{mmu_8h_a29832d31589df1af6f94c0ce29b2d615}\label{mmu_8h_a29832d31589df1af6f94c0ce29b2d615}} 
\index{mmu.h@{mmu.h}!get\_free\_block@{get\_free\_block}}
\index{get\_free\_block@{get\_free\_block}!mmu.h@{mmu.h}}
\doxysubsubsection{\texorpdfstring{get\_free\_block()}{get\_free\_block()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{struct_heap_header__t}{Heap\+Header\+\_\+t}}$\ast$ get\+\_\+free\+\_\+block (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{struct_system__t}{System\+\_\+t}} $\ast$}]{sys,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}

\mbox{\Hypertarget{mmu_8h_aced3be7468ff7fdb0280f39fc279c84b}\label{mmu_8h_aced3be7468ff7fdb0280f39fc279c84b}} 
\index{mmu.h@{mmu.h}!mmu\_init@{mmu\_init}}
\index{mmu\_init@{mmu\_init}!mmu.h@{mmu.h}}
\doxysubsubsection{\texorpdfstring{mmu\_init()}{mmu\_init()}}
{\footnotesize\ttfamily void mmu\+\_\+init (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{struct_memory_management_unit__t}{Memory\+Management\+Unit\+\_\+t}} $\ast$}]{mmu,  }\item[{char $\ast$}]{base\+\_\+heap,  }\item[{size\+\_\+t}]{heap\+\_\+max\+\_\+size }\end{DoxyParamCaption})}



Initialise the MMU. 


\begin{DoxyParams}{Parameters}
{\em mmu} & The Memory Management Unit \\
\hline
{\em base\+\_\+heap} & The address to the raw heap area \\
\hline
{\em heap\+\_\+max\+\_\+size} & The maximum size of the raw heap area \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{mmu_8h_a3e2de839c88fb1105d9eb63187c375f5}\label{mmu_8h_a3e2de839c88fb1105d9eb63187c375f5}} 
\index{mmu.h@{mmu.h}!sys\_alloc@{sys\_alloc}}
\index{sys\_alloc@{sys\_alloc}!mmu.h@{mmu.h}}
\doxysubsubsection{\texorpdfstring{sys\_alloc()}{sys\_alloc()}}
{\footnotesize\ttfamily char$\ast$ sys\+\_\+alloc (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{struct_system__t}{System\+\_\+t}} $\ast$}]{sys,  }\item[{size\+\_\+t}]{len }\end{DoxyParamCaption})}



System\textquotesingle{}s memory allocator. 


\begin{DoxyParams}{Parameters}
{\em sys} & The system \\
\hline
{\em len} & The size of the memory block. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
NULL if the allocation failed (eg\+: no more memory), else the address of the allocated block. 
\end{DoxyReturn}
\mbox{\Hypertarget{mmu_8h_a742589a238a1da57b56dbe8069e19823}\label{mmu_8h_a742589a238a1da57b56dbe8069e19823}} 
\index{mmu.h@{mmu.h}!sys\_free@{sys\_free}}
\index{sys\_free@{sys\_free}!mmu.h@{mmu.h}}
\doxysubsubsection{\texorpdfstring{sys\_free()}{sys\_free()}}
{\footnotesize\ttfamily void sys\+\_\+free (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{struct_system__t}{System\+\_\+t}} $\ast$}]{sys,  }\item[{char $\ast$}]{block }\end{DoxyParamCaption})}



System\textquotesingle{}s memory free. 

Free the memory block


\begin{DoxyParams}{Parameters}
{\em sys} & The system \\
\hline
{\em block} & The memory block to free \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{mmu_8h_aa2721811f83422cae2d58ec18cdc060c}\label{mmu_8h_aa2721811f83422cae2d58ec18cdc060c}} 
\index{mmu.h@{mmu.h}!sys\_sbrk@{sys\_sbrk}}
\index{sys\_sbrk@{sys\_sbrk}!mmu.h@{mmu.h}}
\doxysubsubsection{\texorpdfstring{sys\_sbrk()}{sys\_sbrk()}}
{\footnotesize\ttfamily char$\ast$ sys\+\_\+sbrk (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{struct_system__t}{System\+\_\+t}} $\ast$}]{sys,  }\item[{int}]{len }\end{DoxyParamCaption})}



Change the data segment size. 

The simulation allocate a fixed-\/size memory block at the beginning. The system can get/release raw memory based on this memory block. The raw memory is then used by the MMU to alloc/free memory.


\begin{DoxyParams}{Parameters}
{\em sys} & The system \\
\hline
{\em len} & If $>$ 0, add len bytes to the data segment, if $<$ 0 remove len bytes to the data segment, if =0, return the head of the data segment. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
NULL if the function failed (eg\+: no more memory), or the address of the allocated block. 
\end{DoxyReturn}
